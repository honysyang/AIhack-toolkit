# ray框架安全测试工具


## 简介：
该工具主要用于检测目标ray框架是否存在未授权任意命令可执行漏洞进行安全测试


## 适用环境：
- 适用于ray 2.9.3-2.40.0版本


## 文件说明：
- poc_v1.py  测试工具的版本1，支持使用者自定义扫描IP, 默认端口为8265
- poc_v2.py  测试工具的版本2，支持使用者自定义扫描IP、扫描端口

备注：后文未经说明，测试工具均默认指向poc_v2.py


## 文件使用说明：
1. 自定义扫描IP，端口采用默认端口
python3 poc_v2.py --ip 192.168.1.2

2. 自定义扫描IP，自定义扫描端口
python3 poc_v2.py --ip 192.168.1.2 --port 6666

3. 自定义扫描IP，指定扫描全端口
python3 poc_v2.py --ip 192.168.1.2 --all-ports



## 运行demo:
(venv) yzj@ldd:~/桌面/venv$ python3 poc.py --ip 10.0.2.15 --all-ports


================================================================================
               _             _____        __      
     /\       (_)           |_   _|      / _|     
    /  \   ___ _  __ _ _ __   | |  _ __ | |_ ___  
   / /\ \ / __| |/ _` | '_ \  | | | '_ \|  _/ _ \ 
  / ____ \\__ \ | (_| | | | |_| |_| | | | || (_) |
 /_/    \_\___/_|\__,_|_| |_|_____|_| |_|_| \___/ 


        Ray Cluster Security Scanner v1.0

        说明：本程序当前默认适用于ray 2.9.3-2.40.0 版本
        用途：本程序主要用于检测目标ray框架是否存在未授权任意命令可执行漏洞进行安全测试
        漏洞影响：攻击者可能远程控制ray框架运行主机，执行任意操作
        技术支持：亚信安全人工智能实验室
================================================================================
    
Scanning:  23%|██████████████████████████████████████████▋                                                                                                                                                 |! 扫描到端口34945开放, 检测http://10.0.2.15:34945未发现当前Ray框架存在目标漏洞
2024-12-20 10:18:40,985	INFO dashboard_sdk.py:385 -- Package gcs://_ray_pkg_a8c1209a54fc7117.zip already exists, skipping upload.
! 扫描到端口8265开放, 检测http://10.0.2.15:8265.....
! 发现当前Ray框架在端口 8265 存在未授权任意命令可执行漏洞
**** 创建job(检测用例)成功，获得job_id为raysubmit_jbhhTqsNt3Q6K219。
安全建议: 
1. 立即启用Ray的认证机制，限制只有授权用户可以提交作业。
2. 确保Ray集群只在可信的网络环境中运行，避免暴露于公共网络。
3. 定期更新Ray版本，应用最新的安全补丁。




## 法律声明：
该工具仅用于安全检测，不提供漏洞利用能力，用户在使用前请务必了解漏洞的详细信息，并遵守当地法律法规。
